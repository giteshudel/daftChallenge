---
title: "DAFT Package Challenge"
subtitle: "Recreating the Scurvy DAGs with Beautiful Visualizations"
format:
  html: default
execute:
  echo: true
  eval: true
---

# üé® DAFT Package Challenge - Recreating the Scurvy DAGs

::: {.callout-important}
## üìä Challenge Requirements In Section [Student Analysis Section](#student-analysis-section)
- Recreate all three scurvy DAGs using DAFT programming
- Optional: Demonstrate understanding of DAFT customization options
:::

## The Problem: Mastering Probabilistic Graphical Models with DAFT

**Core Question:** How can we use the DAFT package to create visually appealing Directed Acyclic Graphs (DAGs) that tell a compelling data story?

**The Challenge:** You'll recreate three historical DAGs depicting the fascinating story of how we lost and rediscovered the cure to scurvy. This challenge teaches you to use DAFT for creating professional-quality probabilistic graphical models.

**Our Approach:** We'll work through the three different understandings of the scurvy data generating process, learning DAFT customization techniques while exploring a crucial moment in medical history.

::: {.callout-warning}
## ‚ö†Ô∏è AI Partnership Required

This challenge pushes boundaries intentionally. You'll tackle problems that normally require weeks of study, but with Cursor AI as your partner (and your brain keeping it honest), you can accomplish more than you thought possible.

**The new reality:** The four stages of competence are Ignorance ‚Üí Awareness ‚Üí Learning ‚Üí Mastery. AI lets us produce Mastery-level work while operating primarily in the Awareness stage. I focus on awareness training, you leverage AI for execution, and together we create outputs that used to require years of dedicated study.
:::

## The Scurvy Story: A Data Science Tragedy

Scurvy was a devastating disease that affected sailors on long voyages. The cure was discovered in 1747, but due to a misunderstanding about the cause, the cure was lost for over 150 years. The story involves three different understandings of the data generating process:

1. **1747 Understanding:** Lemons prevent scurvy (correct but incomplete!)
2. **Misguided Belief:** Acid kills bacteria that causes scurvy (wrong!)
3. **1928 Understanding:** Vitamin C prevents scurvy (the real mechanism)

```{python}
#| label: setup-environment
#| echo: false
#| message: false
#| warning: false

# Install DAFT package (run this in terminal if not already installed)
# pip install 'daft-pgm'

import daft
import matplotlib.pyplot as plt
import numpy as np

# Set up plotting parameters for better quality
plt.rcParams['figure.dpi'] = 150
plt.rcParams['savefig.dpi'] = 300

print("DAFT package imported successfully!")
print("Ready to create beautiful DAGs!")
```

### DAG 1: The 1747 Understanding (Correct but Incomplete)

**Historical Context:** In 1747, James Lind discovered that lemons prevent scurvy through a controlled experiment. However, the understanding was incomplete - they knew lemons worked but not why.

```{python}
#| label: dag-1-1747
#| echo: false

# TODO: Replace this placeholder with your DAFT code
# Create a DAG showing the 1747 understanding: Lemons ‚Üí Scurvy Prevention

# Your code here - recreate the DAG from the reference image
# Use DAFT to create nodes and edges that match the visual structure
# Customize colors and styling to make it professional


import daft
import matplotlib.pyplot as plt

# Create a PGM object
pgm = daft.PGM(dpi=150, alternate_style="outer")

# Example of a professionally styled node
pgm.add_node("Lemons", "Lemons", 1, 1, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'lemonchiffon', 
                 'edgecolor': 'yellowgreen', 
                 'linewidth': 2,
                 'alpha': 0.8,
             })
pgm.add_node("Scurvy", "Scurvy", 3.25, 1, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'thistle', 
                 'edgecolor': 'purple', 
                 'linewidth': 2,
                 'alpha': 0.8,
             })
pgm.add_edge("Lemons", "Scurvy")

pgm.render()
plt.title("Simplified Lind's Model (1747)", fontsize=12, fontweight='bold', pad=15)

```

### DAG 2: The Misguided Belief (Wrong Understanding)

**Historical Context:** Over time, people came to believe it was the acid in lemons that killed bacteria which was causing scurvy. This led to lemons being replaced by limes (cheaper but less Vitamin C) or just using acids like vinegar, causing scurvy to return.

```{python}
#| label: dag-2-misguided
#| echo: false
#| fig-cap: "DAG 2: The Misguided Belief - Acid kills bacteria (INCORRECT understanding that led to scurvy's return)"

# Create a DAG showing the misguided belief: Acid ‚Üí Bacteria Death ‚Üí Scurvy Prevention
# This represents the WRONG understanding that led to scurvy's return

import daft
import matplotlib.pyplot as plt

# Create a PGM object
pgm = daft.PGM(dpi=150, alternate_style="outer")

# Node 1: Acid (what they thought was the active ingredient)
pgm.add_node("acid", "Acid", 1, 1, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'indianred',  
                 'edgecolor': 'darkred',  
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Node 2: Bacteria Death (the incorrect mechanism)
pgm.add_node("bacteria", "Bacteria\nDeath", 2.50, -0.5, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'antiquewhite',  
                 'edgecolor': 'goldenrod',
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Node 3: No Scurvy (the outcome)
pgm.add_node("scurvy", "Scurvy\nPrevention", 4.00, -2, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'thistle',  
                 'edgecolor': 'purple', 
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Add edges showing the INCORRECT causal chain
# Customize arrow size and appearance
pgm.add_edge("acid", "bacteria")
pgm.add_edge("bacteria", "scurvy")

# Render the DAG
pgm.render()
plt.title("Updated Bacterial Theory (Late 19th Century)", fontsize=12, fontweight='bold', pad=15)
```

### DAG 3: The 1928 Understanding (Complete and Correct)

**Historical Context:** In 1928, the true mechanism was discovered - it was Vitamin C (ascorbic acid) that prevented scurvy. This complete understanding finally explained why lemons worked and why the acid theory was wrong.

```{python}
#| label: dag-3-1928
#| echo: false

# TODO: Replace this placeholder with your DAFT code
# Create a DAG showing the 1928 understanding: Vitamin C ‚Üí Scurvy Prevention

# Your code here - recreate the DAG from the reference image
# This should be the most complete and accurate representation
# Use professional styling that would be suitable for a scientific publication


import daft
import matplotlib.pyplot as plt

# Create a PGM object
pgm = daft.PGM(dpi=150, alternate_style="outer")

# Node 1: Acid (what they thought was the active ingredient)
pgm.add_node("vitamin_c", "Vitamin C", 1, 1, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'lightgreen',  
                 'edgecolor': 'darkgreen',  # Crimson
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Node 2: Bacteria Death (the incorrect mechanism)
pgm.add_node("collagen", "Collagen\nSynthesis", 2.50, -0.5, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'yellow',  
                 'edgecolor': 'red',  # Dim gray
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Node 3: No Scurvy (the outcome)
pgm.add_node("scurvy", "Scurvy\nPrevention", 4.00, -2, aspect = 3, scale = 1.1,
             plot_params={
                 'facecolor': 'thistle', 
                 'edgecolor': 'purple',  
                 'linewidth': 2,
                 'alpha': 0.8,
             })

# Add edges showing the INCORRECT causal chain
# Customize arrow size and appearance
pgm.add_edge("vitamin_c", "collagen")
pgm.add_edge("collagen", "scurvy")

# Render the DAG
pgm.render()
plt.title("Simplified Modern Understanding (1930 Onwards)", fontsize=12, fontweight='bold', pad=15)
```





